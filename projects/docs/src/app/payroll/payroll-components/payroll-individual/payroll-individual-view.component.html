<!-- ============================================================== -->
<!-- Main wrapper - style you can find in pages.scss -->
<!-- ============================================================== -->
<form [formGroup]="form" class="m-0 d-flex main-container main-form" *ngIf="stateSrv.themeState$ | async as state; else loading">

  <mat-card *ngIf="state?.loading" class="m-0" style="display: flex; justify-content: center; align-items: center">
    <mat-progress-bar mode="indeterminate" ></mat-progress-bar>
  </mat-card>

  <mat-toolbar class="primary topbar telative">
    <!-- ============================================================== -->
    <!-- sidebar toggle -->
    <!-- ============================================================== -->

    <button mat-icon-button (click)="formMenu.toggle()" value="sidebarclosed">
      <mat-icon>menu</mat-icon>
    </button>

    <!-- ============================================================== -->
    <!-- Logo - style you can find in header.scss -->
    <!-- ============================================================== -->
    <div class="navbar-header d-flex align-items-center ml-2">
      <a class="navbar-brand" (click)="navSrv.navigate('/nÃ³mina/individual', this.generalData())" tabindex="1">
        <span>{{'1F4C5'|gtdEmoji}}</span>
        <strong>
          {{form.value.fechaCorte | date : 'MM/yyyy' }}
        </strong>
      </a>
      <ng-container *ngIf="!(state.XSmall || state.Small)">
        <mat-icon class="material-icons-outlined">
          arrow_right
        </mat-icon>
      </ng-container>
      <a class="ml-2" tabindex="2">
        <strong>
          {{form.value.primerNombre}}
        </strong>
      </a>
      <ng-container *ngIf="!(state.XSmall || state.Small)">
        <mat-icon class="material-icons-outlined" *ngIf="form.value.trabajadorId">
          arrow_right
        </mat-icon>
        <a class="ml-2 navbar-brand">
          {{ form.value.id ? 'Editar' : 'Nueva'}}
        </a>
      </ng-container>
    </div>

    <span fxFlex></span>


    <mat-chip-list ariaOrientation="horizontal" *ngIf="!(state.XSmall || state.Small)">
      <mat-chip color="primary" selected="true" *ngIf="this.form.value.deduccionesId"
        (click)="navSrv.navigate('/nÃ³mina/deducciones', this.individualData())"><span>âž•
          DeducciÃ³n</span></mat-chip>
      <mat-chip color="primary" selected="true" *ngIf="this.form.value.devengadosId"
        (click)="navSrv.navigate('/nÃ³mina/devengos', this.individualData())"><span>âž•
          Devengo</span></mat-chip>
      <mat-chip class="btn btn-outline-primary" class="primary" (click)="save()">
        <span>{{'1F4D1'|gtdEmoji}}</span><span *ngIf="!(state.XSmall || state.Small)">Generar</span>
      </mat-chip>
    </mat-chip-list>
    <button [matMenuTriggerFor]="sdprofile" mat-icon-button color="accent">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #sdprofile="matMenu" class="mymegamenu">
      <button mat-menu-item *ngIf="(state.XSmall || state.Small) && this.form.value.deduccionesId"
        (click)="navSrv.navigate('/nÃ³mina/deducciones', this.individualData())">
        âž• DeducciÃ³n
      </button>
      <button mat-menu-item *ngIf="(state.XSmall || state.Small) && this.form.value.deduccionesId"
        (click)="navSrv.navigate('/nÃ³mina/devengos', this.individualData())">
        âž• Devengo
      </button>
      <button mat-menu-item (click)="delete()" *ngIf="this.form.value.nominaIndividualId">
        <mat-icon>delete</mat-icon> Eliminar
      </button>
      <button mat-menu-item (click)="toggleFullScreen()">
        <ng-container *ngIf="!state.fullScreen">
          <mat-icon>open_in_full</mat-icon> Pantalla completa
        </ng-container>
        <ng-container *ngIf="state.fullScreen">
          <mat-icon>close_fullscreen</mat-icon> Pantalla normal
        </ng-container>
      </button>
      <button mat-menu-item (click)="onNoClick()">
        <mat-icon>cancel</mat-icon>Cancelar
      </button>
    </mat-menu>
  </mat-toolbar>
  <mat-sidenav-container class="page-container" style.marginTop.px="0"  >


    <mat-sidenav #formMenu id="formMenu" class="dark-sidebar pl-xs" fixedTopGap="0" opened="true"
      [mode]="(state.XSmall || state.Small) ? 'over' : 'side'" fixedTopGap="0" [opened]="!(state.XSmall || state.Small)"
      style="direction: rtl;">

      <mat-nav-list appAccordion style="direction: ltr ">
        <div class="m-0 d-flex main-container main-form">
          <mat-form-field class="find-menu-item" style="direction: ltr; padding: 0px 15px ">
            <mat-label>Buscar...</mat-label>
            <input type="text" matInput formControlName="menuItem" placeholder="Buscar" #buscar>
            <mat-icon *ngIf="buscar.value" (click)="buscar.value = ''; filter('');" matSuffix mat-fab>clear</mat-icon>
          </mat-form-field>
        </div>
        <mat-list-item appAccordionLink routerLinkActive="selected">
          <a class="" appAccordionToggle (click)="formMenu.toggle(); scrollToElement(ind.formView)">
            <span>ðŸ“œ</span>
            <span>NÃ³mina Individual</span>
            <span fxFlex></span>
          </a>
        </mat-list-item>
        <mat-list-item appAccordionLink routerLinkActive="selected">
          <a class="" appAccordionToggle (click)="formMenu.toggle(); scrollToElement(dev.formView)">
            <span>ðŸ’µ</span>
            <span>Devengos</span>
            <span fxFlex></span>
          </a>
        </mat-list-item>
        <mat-list-item appAccordionLink routerLinkActive="selected">
          <a class="" appAccordionToggle (click)="formMenu.toggle(); scrollToElement(ded.formView)">
            <span>ðŸ§¾</span>
            <span>Deducciones</span>
            <span fxFlex></span>
          </a>
        </mat-list-item>
        <mat-list-item appAccordionLink routerLinkActive="selected">
          <a class="" appAccordionToggle (click)="formMenu.toggle(); scrollToElement(notas.formView)">
            <span>{{'1F4D1'|gtdEmoji}}</span>
            <span>Notas</span>
            <span fxFlex></span>
          </a>
        </mat-list-item>
        <mat-list-item appAccordionLink routerLinkActive="selected">
          <a class="" appAccordionToggle (click)="formMenu.toggle(); scrollToElement(period.formView)">
            <span>{{'1F5D3'|gtdEmoji}}</span>
            <span>Periodo</span>
            <span fxFlex></span>
          </a>
        </mat-list-item>
        <mat-list-item appAccordionLink routerLinkActive="selected">
          <a class="" appAccordionToggle (click)="formMenu.toggle(); scrollToElement(fecP.formView)">
            <span>{{'1F4C6'|gtdEmoji}}</span>
            <span>Fechas Pagos</span>
            <span fxFlex></span>
          </a>
        </mat-list-item>
        <mat-list-item appAccordionLink routerLinkActive="selected">
          <a class="" appAccordionToggle (click)="formMenu.toggle(); scrollToElement(proveedorXML.formView)">
            <span>{{'1F5A8'|gtdEmoji}}</span>
            <span>Proveedor XML</span>
            <span fxFlex></span>
          </a>
        </mat-list-item>
      </mat-nav-list>

    </mat-sidenav>
    <!-- ============================================================== -->
    <!-- Sidebar - style you can find in sidebar.scss -->
    <!-- ============================================================== -->

    <!-- ============================================================== -->
    <!-- Page container - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <mat-sidenav-content class="page-view" >
      <app-payroll-individual-form-dialog [form]="form" #ind></app-payroll-individual-form-dialog>
      <app-payroll-devengados [form]="form" #ded></app-payroll-devengados>
      <app-payroll-deducciones [form]="form" #dev ></app-payroll-deducciones>
      <app-payroll-notas #notas> </app-payroll-notas>
      <app-payroll-periodos #period></app-payroll-periodos>
      <app-payroll-fechas-pago #fecP></app-payroll-fechas-pago>
      <app-payroll-proveedores-xml #proveedorXML></app-payroll-proveedores-xml>
    </mat-sidenav-content>
    <!-- ============================================================== -->
    <!-- Page container - style you can find in pages.scss -->
    <!-- ============================================================== -->
  </mat-sidenav-container>


</form>

<ng-template #loading>
  Loading User...
</ng-template>
